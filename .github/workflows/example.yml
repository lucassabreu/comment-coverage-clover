name: example of workflow
on:
  pull_request:

jobs:
  build:
    name: example of workflow
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@master

      - name: clover file not found
        uses: ./.
        continue-on-error: true
        with:
          dir-prefix: /var/www/html
          file: not.found.xml
          base-file: not.found.too.xml
          signature: "file not found"

      - name: clover file to comment (clover.example.xml)
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          signature: "valid file with inexistent base-file"

      - name: clover file to comment (clover.pdepend.xml)
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.pdepend.xml
          base-file: clover.pdepend.base.xml
          only-with-cover: true
          signature: "valid file with valid base-file"

      - name: clover file to comment (clover.example.base.xml)
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.base.xml
          base-file: clover.example.xml
          chart-size: 75
          only-with-cover: true
          signature: "valid file with valid base-file, with custom chart-size"

      - name: clover file to comment - max descrease
        uses: ./.
        continue-on-error: true
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.example.base.xml
          max-line-coverage-decrease: 2.0
          max-method-coverage-decrease: 1.0
          min-line-coverage: 99.3
          min-method-coverage: 81.02
          signature: "valid file with valid base-file, with blocking"

      - name: clover file to comment - no descrease
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.example.base.xml
          max-line-coverage-decrease: 3.0
          max-method-coverage-decrease: 2.0
          min-line-coverage: 80.0
          min-method-coverage: 80.00
          signature: "valid file with valid base-file, without blocking"

      - name: clover file to comment - without table
        uses: ./.
        continue-on-error: true
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.example.base.xml
          max-line-coverage-decrease: 2.0
          max-method-coverage-decrease: 1.0
          min-line-coverage: 99.3
          min-method-coverage: 81.02
          with-table: false
          signature: "valid file with valid base-file, without table"

      - name: clover file to comment - without table or chart
        uses: ./.
        continue-on-error: true
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.example.base.xml
          max-line-coverage-decrease: 2.0
          max-method-coverage-decrease: 1.0
          min-line-coverage: 99.3
          min-method-coverage: 81.02
          with-table: false
          with-chart: false
          signature: "valid file with valid base-file, without table or chart"

      - name: clover file to comment - only below 70% methods coverage
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          table-below-coverage: 70
          table-type-coverage: methods
          signature: "clover file to comment - only below 70% methods coverage"

      - name: clover file to comment - only below 80% lines coveraged
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          table-below-coverage: 80
          signature: "clover file to comment - only below 80% lines coveraged"

      - name: clover file to comment - only above 0% methods coverage
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          table-above-coverage: 10
          table-type-coverage: methods
          signature: "clover file to comment - only above 10% methods coverage"

      - name: clover file to comment - invalid coverage type
        uses: ./.
        continue-on-error: true
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          table-type-coverage: banana
          signature: "clover file to comment - invalid coverage type"

      - name: clover file to comment - only between 50% and 80% line coverage
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: clover.example.xml
          base-file: clover.missing.xml
          with-chart: false
          table-above-coverage: 50
          table-below-coverage: 80
          signature: "clover file to comment - only between 50% and 80% line coverage"

      - name: clover file to comment - only coverable lines
        uses: ./.
        with:
          dir-prefix: /var/www/html
          file: nolines.xml
          with-chart: false
          signature: "only coverable lines"
          only-with-coverable-lines: true
